import t from"react";import{Form as e,Field as r,FormSpy as n}from"react-final-form";import o from"final-form-arrays";import{Form as a}from"react-bootstrap";import{FieldArray as i}from"react-final-form-arrays";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var c=function(){return(c=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var s=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o};var f=function(){this.__data__=[],this.size=0};var l=function(t,e){return t===e||t!=t&&e!=e};var v=function(t,e){for(var r=t.length;r--;)if(l(t[r][0],e))return r;return-1},p=Array.prototype.splice;var d=function(t){var e=this.__data__,r=v(e,t);return!(r<0)&&(r==e.length-1?e.pop():p.call(e,r,1),--this.size,!0)};var y=function(t){var e=this.__data__,r=v(e,t);return r<0?void 0:e[r][1]};var h=function(t){return v(this.__data__,t)>-1};var b=function(t,e){var r=this.__data__,n=v(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function m(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}m.prototype.clear=f,m.prototype.delete=d,m.prototype.get=y,m.prototype.has=h,m.prototype.set=b;var j=m;var g=function(){this.__data__=new j,this.size=0};var _=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var w=function(t){return this.__data__.get(t)};var O=function(t){return this.__data__.has(t)},A="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function E(t,e){return t(e={exports:{}},e.exports),e.exports}var F="object"==typeof A&&A&&A.Object===Object&&A,S="object"==typeof self&&self&&self.Object===Object&&self,P=F||S||Function("return this")(),N=P.Symbol,x=Object.prototype,k=x.hasOwnProperty,z=x.toString,T=N?N.toStringTag:void 0;var C=function(t){var e=k.call(t,T),r=t[T];try{t[T]=void 0;var n=!0}catch(t){}var o=z.call(t);return n&&(e?t[T]=r:delete t[T]),o},I=Object.prototype.toString;var B=function(t){return I.call(t)},M=N?N.toStringTag:void 0;var U=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":M&&M in Object(t)?C(t):B(t)};var D=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var L,$=function(t){if(!D(t))return!1;var e=U(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},W=P["__core-js_shared__"],q=(L=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||""))?"Symbol(src)_1."+L:"";var V=function(t){return!!q&&q in t},R=Function.prototype.toString;var G=function(t){if(null!=t){try{return R.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Z=/^\[object .+?Constructor\]$/,H=Function.prototype,J=Object.prototype,K=H.toString,Q=J.hasOwnProperty,X=RegExp("^"+K.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Y=function(t){return!(!D(t)||V(t))&&($(t)?X:Z).test(G(t))};var tt=function(t,e){return null==t?void 0:t[e]};var et=function(t,e){var r=tt(t,e);return Y(r)?r:void 0},rt=et(P,"Map"),nt=et(Object,"create");var ot=function(){this.__data__=nt?nt(null):{},this.size=0};var at=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},it=Object.prototype.hasOwnProperty;var ut=function(t){var e=this.__data__;if(nt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return it.call(e,t)?e[t]:void 0},ct=Object.prototype.hasOwnProperty;var st=function(t){var e=this.__data__;return nt?void 0!==e[t]:ct.call(e,t)};var ft=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=nt&&void 0===e?"__lodash_hash_undefined__":e,this};function lt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}lt.prototype.clear=ot,lt.prototype.delete=at,lt.prototype.get=ut,lt.prototype.has=st,lt.prototype.set=ft;var vt=lt;var pt=function(){this.size=0,this.__data__={hash:new vt,map:new(rt||j),string:new vt}};var dt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var yt=function(t,e){var r=t.__data__;return dt(e)?r["string"==typeof e?"string":"hash"]:r.map};var ht=function(t){var e=yt(this,t).delete(t);return this.size-=e?1:0,e};var bt=function(t){return yt(this,t).get(t)};var mt=function(t){return yt(this,t).has(t)};var jt=function(t,e){var r=yt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function gt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}gt.prototype.clear=pt,gt.prototype.delete=ht,gt.prototype.get=bt,gt.prototype.has=mt,gt.prototype.set=jt;var _t=gt;var wt=function(t,e){var r=this.__data__;if(r instanceof j){var n=r.__data__;if(!rt||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new _t(n)}return r.set(t,e),this.size=r.size,this};function Ot(t){var e=this.__data__=new j(t);this.size=e.size}Ot.prototype.clear=g,Ot.prototype.delete=_,Ot.prototype.get=w,Ot.prototype.has=O,Ot.prototype.set=wt;var At=Ot;var Et=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t},Ft=function(){try{var t=et(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var St=function(t,e,r){"__proto__"==e&&Ft?Ft(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},Pt=Object.prototype.hasOwnProperty;var Nt=function(t,e,r){var n=t[e];Pt.call(t,e)&&l(n,r)&&(void 0!==r||e in t)||St(t,e,r)};var xt=function(t,e,r,n){var o=!r;r||(r={});for(var a=-1,i=e.length;++a<i;){var u=e[a],c=n?n(r[u],t[u],u,r,t):void 0;void 0===c&&(c=t[u]),o?St(r,u,c):Nt(r,u,c)}return r};var kt=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var zt=function(t){return null!=t&&"object"==typeof t};var Tt=function(t){return zt(t)&&"[object Arguments]"==U(t)},Ct=Object.prototype,It=Ct.hasOwnProperty,Bt=Ct.propertyIsEnumerable,Mt=Tt(function(){return arguments}())?Tt:function(t){return zt(t)&&It.call(t,"callee")&&!Bt.call(t,"callee")},Ut=Array.isArray;var Dt=function(){return!1},Lt=E((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?P.Buffer:void 0,a=(o?o.isBuffer:void 0)||Dt;t.exports=a})),$t=/^(?:0|[1-9]\d*)$/;var Wt=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&$t.test(t))&&t>-1&&t%1==0&&t<e};var qt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Vt={};Vt["[object Float32Array]"]=Vt["[object Float64Array]"]=Vt["[object Int8Array]"]=Vt["[object Int16Array]"]=Vt["[object Int32Array]"]=Vt["[object Uint8Array]"]=Vt["[object Uint8ClampedArray]"]=Vt["[object Uint16Array]"]=Vt["[object Uint32Array]"]=!0,Vt["[object Arguments]"]=Vt["[object Array]"]=Vt["[object ArrayBuffer]"]=Vt["[object Boolean]"]=Vt["[object DataView]"]=Vt["[object Date]"]=Vt["[object Error]"]=Vt["[object Function]"]=Vt["[object Map]"]=Vt["[object Number]"]=Vt["[object Object]"]=Vt["[object RegExp]"]=Vt["[object Set]"]=Vt["[object String]"]=Vt["[object WeakMap]"]=!1;var Rt=function(t){return zt(t)&&qt(t.length)&&!!Vt[U(t)]};var Gt=function(t){return function(e){return t(e)}},Zt=E((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r&&F.process,a=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=a})),Ht=Zt&&Zt.isTypedArray,Jt=Ht?Gt(Ht):Rt,Kt=Object.prototype.hasOwnProperty;var Qt=function(t,e){var r=Ut(t),n=!r&&Mt(t),o=!r&&!n&&Lt(t),a=!r&&!n&&!o&&Jt(t),i=r||n||o||a,u=i?kt(t.length,String):[],c=u.length;for(var s in t)!e&&!Kt.call(t,s)||i&&("length"==s||o&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Wt(s,c))||u.push(s);return u},Xt=Object.prototype;var Yt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Xt)};var te=function(t,e){return function(r){return t(e(r))}},ee=te(Object.keys,Object),re=Object.prototype.hasOwnProperty;var ne=function(t){if(!Yt(t))return ee(t);var e=[];for(var r in Object(t))re.call(t,r)&&"constructor"!=r&&e.push(r);return e};var oe=function(t){return null!=t&&qt(t.length)&&!$(t)};var ae=function(t){return oe(t)?Qt(t):ne(t)};var ie=function(t,e){return t&&xt(e,ae(e),t)};var ue=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},ce=Object.prototype.hasOwnProperty;var se=function(t){if(!D(t))return ue(t);var e=Yt(t),r=[];for(var n in t)("constructor"!=n||!e&&ce.call(t,n))&&r.push(n);return r};var fe=function(t){return oe(t)?Qt(t,!0):se(t)};var le=function(t,e){return t&&xt(e,fe(e),t)},ve=E((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?P.Buffer:void 0,a=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=a?a(r):new t.constructor(r);return t.copy(n),n}}));var pe=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var de=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,a=[];++r<n;){var i=t[r];e(i,r,t)&&(a[o++]=i)}return a};var ye=function(){return[]},he=Object.prototype.propertyIsEnumerable,be=Object.getOwnPropertySymbols,me=be?function(t){return null==t?[]:(t=Object(t),de(be(t),(function(e){return he.call(t,e)})))}:ye;var je=function(t,e){return xt(t,me(t),e)};var ge=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},_e=te(Object.getPrototypeOf,Object),we=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)ge(e,me(t)),t=_e(t);return e}:ye;var Oe=function(t,e){return xt(t,we(t),e)};var Ae=function(t,e,r){var n=e(t);return Ut(t)?n:ge(n,r(t))};var Ee=function(t){return Ae(t,ae,me)};var Fe=function(t){return Ae(t,fe,we)},Se=et(P,"DataView"),Pe=et(P,"Promise"),Ne=et(P,"Set"),xe=et(P,"WeakMap"),ke=G(Se),ze=G(rt),Te=G(Pe),Ce=G(Ne),Ie=G(xe),Be=U;(Se&&"[object DataView]"!=Be(new Se(new ArrayBuffer(1)))||rt&&"[object Map]"!=Be(new rt)||Pe&&"[object Promise]"!=Be(Pe.resolve())||Ne&&"[object Set]"!=Be(new Ne)||xe&&"[object WeakMap]"!=Be(new xe))&&(Be=function(t){var e=U(t),r="[object Object]"==e?t.constructor:void 0,n=r?G(r):"";if(n)switch(n){case ke:return"[object DataView]";case ze:return"[object Map]";case Te:return"[object Promise]";case Ce:return"[object Set]";case Ie:return"[object WeakMap]"}return e});var Me=Be,Ue=Object.prototype.hasOwnProperty;var De=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Ue.call(t,"index")&&(r.index=t.index,r.input=t.input),r},Le=P.Uint8Array;var $e=function(t){var e=new t.constructor(t.byteLength);return new Le(e).set(new Le(t)),e};var We=function(t,e){var r=e?$e(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},qe=/\w*$/;var Ve=function(t){var e=new t.constructor(t.source,qe.exec(t));return e.lastIndex=t.lastIndex,e},Re=N?N.prototype:void 0,Ge=Re?Re.valueOf:void 0;var Ze=function(t){return Ge?Object(Ge.call(t)):{}};var He=function(t,e){var r=e?$e(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)};var Je=function(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return $e(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return We(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return He(t,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return Ve(t);case"[object Set]":return new n;case"[object Symbol]":return Ze(t)}},Ke=Object.create,Qe=function(){function t(){}return function(e){if(!D(e))return{};if(Ke)return Ke(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var Xe=function(t){return"function"!=typeof t.constructor||Yt(t)?{}:Qe(_e(t))};var Ye=function(t){return zt(t)&&"[object Map]"==Me(t)},tr=Zt&&Zt.isMap,er=tr?Gt(tr):Ye;var rr=function(t){return zt(t)&&"[object Set]"==Me(t)},nr=Zt&&Zt.isSet,or=nr?Gt(nr):rr,ar={};ar["[object Arguments]"]=ar["[object Array]"]=ar["[object ArrayBuffer]"]=ar["[object DataView]"]=ar["[object Boolean]"]=ar["[object Date]"]=ar["[object Float32Array]"]=ar["[object Float64Array]"]=ar["[object Int8Array]"]=ar["[object Int16Array]"]=ar["[object Int32Array]"]=ar["[object Map]"]=ar["[object Number]"]=ar["[object Object]"]=ar["[object RegExp]"]=ar["[object Set]"]=ar["[object String]"]=ar["[object Symbol]"]=ar["[object Uint8Array]"]=ar["[object Uint8ClampedArray]"]=ar["[object Uint16Array]"]=ar["[object Uint32Array]"]=!0,ar["[object Error]"]=ar["[object Function]"]=ar["[object WeakMap]"]=!1;var ir=function t(e,r,n,o,a,i){var u,c=1&r,s=2&r,f=4&r;if(n&&(u=a?n(e,o,a,i):n(e)),void 0!==u)return u;if(!D(e))return e;var l=Ut(e);if(l){if(u=De(e),!c)return pe(e,u)}else{var v=Me(e),p="[object Function]"==v||"[object GeneratorFunction]"==v;if(Lt(e))return ve(e,c);if("[object Object]"==v||"[object Arguments]"==v||p&&!a){if(u=s||p?{}:Xe(e),!c)return s?Oe(e,le(u,e)):je(e,ie(u,e))}else{if(!ar[v])return a?e:{};u=Je(e,v,c)}}i||(i=new At);var d=i.get(e);if(d)return d;i.set(e,u),or(e)?e.forEach((function(o){u.add(t(o,r,n,o,e,i))})):er(e)&&e.forEach((function(o,a){u.set(a,t(o,r,n,a,e,i))}));var y=f?s?Fe:Ee:s?keysIn:ae,h=l?void 0:y(e);return Et(h||e,(function(o,a){h&&(o=e[a=o]),Nt(u,a,t(o,r,n,a,e,i))})),u};var ur=function(t){return"symbol"==typeof t||zt(t)&&"[object Symbol]"==U(t)},cr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sr=/^\w*$/;var fr=function(t,e){if(Ut(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!ur(t))||(sr.test(t)||!cr.test(t)||null!=e&&t in Object(e))};function lr(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=t.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(lr.Cache||_t),r}lr.Cache=_t;var vr=lr;var pr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dr=/\\(\\)?/g,yr=function(t){var e=vr(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(pr,(function(t,r,n,o){e.push(n?o.replace(dr,"$1"):r||t)})),e})),hr=N?N.prototype:void 0,br=hr?hr.toString:void 0;var mr=function t(e){if("string"==typeof e)return e;if(Ut(e))return s(e,t)+"";if(ur(e))return br?br.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r};var jr=function(t){return null==t?"":mr(t)};var gr=function(t,e){return Ut(t)?t:fr(t,e)?[t]:yr(jr(t))};var _r=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0};var wr=function(t){if("string"==typeof t||ur(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e};var Or=function(t,e){for(var r=0,n=(e=gr(e,t)).length;null!=t&&r<n;)t=t[wr(e[r++])];return r&&r==n?t:void 0};var Ar=function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var a=Array(o);++n<o;)a[n]=t[n+e];return a};var Er=function(t,e){return e.length<2?t:Or(t,Ar(e,0,-1))};var Fr=function(t,e){return e=gr(e,t),null==(t=Er(t,e))||delete t[wr(_r(e))]},Sr=Function.prototype,Pr=Object.prototype,Nr=Sr.toString,xr=Pr.hasOwnProperty,kr=Nr.call(Object);var zr=function(t){if(!zt(t)||"[object Object]"!=U(t))return!1;var e=_e(t);if(null===e)return!0;var r=xr.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Nr.call(r)==kr};var Tr=function(t){return zr(t)?void 0:t},Cr=N?N.isConcatSpreadable:void 0;var Ir=function(t){return Ut(t)||Mt(t)||!!(Cr&&t&&t[Cr])};var Br=function t(e,r,n,o,a){var i=-1,u=e.length;for(n||(n=Ir),a||(a=[]);++i<u;){var c=e[i];r>0&&n(c)?r>1?t(c,r-1,n,o,a):ge(a,c):o||(a[a.length]=c)}return a};var Mr=function(t){return(null==t?0:t.length)?Br(t,1):[]};var Ur=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},Dr=Math.max;var Lr=function(t,e,r){return e=Dr(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,a=Dr(n.length-e,0),i=Array(a);++o<a;)i[o]=n[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=n[o];return u[e]=r(i),Ur(t,this,u)}};var $r=function(t){return function(){return t}};var Wr=function(t){return t},qr=Ft?function(t,e){return Ft(t,"toString",{configurable:!0,enumerable:!1,value:$r(e),writable:!0})}:Wr,Vr=Date.now;var Rr=function(t){var e=0,r=0;return function(){var n=Vr(),o=16-(n-r);if(r=n,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(qr);var Gr=function(t){return Rr(Lr(t,void 0,Mr),t+"")}((function(t,e){var r={};if(null==t)return r;var n=!1;e=s(e,(function(e){return e=gr(e,t),n||(n=e.length>1),e})),xt(t,Fe(t),r),n&&(r=ir(r,7,Tr));for(var o=e.length;o--;)Fr(r,e[o]);return r}));var Zr=function(t,e,r){(void 0!==r&&!l(t[e],r)||void 0===r&&!(e in t))&&St(t,e,r)};var Hr=function(t){return function(e,r,n){for(var o=-1,a=Object(e),i=n(e),u=i.length;u--;){var c=i[t?u:++o];if(!1===r(a[c],c,a))break}return e}}();var Jr=function(t){return zt(t)&&oe(t)};var Kr=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var Qr=function(t){return xt(t,fe(t))};var Xr=function(t,e,r,n,o,a,i){var u=Kr(t,r),c=Kr(e,r),s=i.get(c);if(s)Zr(t,r,s);else{var f=a?a(u,c,r+"",t,e,i):void 0,l=void 0===f;if(l){var v=Ut(c),p=!v&&Lt(c),d=!v&&!p&&Jt(c);f=c,v||p||d?Ut(u)?f=u:Jr(u)?f=pe(u):p?(l=!1,f=ve(c,!0)):d?(l=!1,f=He(c,!0)):f=[]:zr(c)||Mt(c)?(f=u,Mt(u)?f=Qr(u):D(u)&&!$(u)||(f=Xe(c))):l=!1}l&&(i.set(c,f),o(f,c,n,a,i),i.delete(c)),Zr(t,r,f)}};var Yr=function t(e,r,n,o,a){e!==r&&Hr(r,(function(i,u){if(a||(a=new At),D(i))Xr(e,r,u,n,t,o,a);else{var c=o?o(Kr(e,u),i,u+"",e,r,a):void 0;void 0===c&&(c=i),Zr(e,u,c)}}),fe)};var tn=function(t,e){return Rr(Lr(t,e,Wr),t+"")};var en=function(t,e,r){if(!D(r))return!1;var n=typeof e;return!!("number"==n?oe(r)&&Wt(e,r.length):"string"==n&&e in r)&&l(r[e],t)};var rn=function(t){return tn((function(e,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,i=o>2?r[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,i&&en(r[0],r[1],i)&&(a=o<3?void 0:a,o=1),e=Object(e);++n<o;){var u=r[n];u&&t(e,u,n,a)}return e}))}((function(t,e,r){Yr(t,e,r)})),nn=Object.prototype.hasOwnProperty;var on=function(t){if(null==t)return!0;if(oe(t)&&(Ut(t)||"string"==typeof t||"function"==typeof t.splice||Lt(t)||Jt(t)||Mt(t)))return!t.length;var e=Me(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(Yt(t))return!ne(t).length;for(var r in t)if(nn.call(t,r))return!1;return!0},an=function(t){var e=Gr(t,["fields"]);if(t.fields)return Array.isArray(t.fields)?t:(e.fields=[],Object.keys(t.fields).forEach((function(r){e.fields.push(Object.assign({},c({},t.fields[r],{name:r})))})),e);throw Error("The provided entity doesn't contain a name")},un=function(t,e,r){var n=this;this.layoutFields=[],this.fields={},this.arrayField={},this.parseEntity=function(t,e,r){var o=n.getEntity(t);if(!o)throw new Error("Provided property entityName: "+t+", does not exist in the provided schema");e&&o.layouts?n.getLayoutFields(o,e):o.fields&&(n.getFields(o,!1,r),n.pushAndEmptyFields())},this.pushAndEmptyFields=function(t){n.parsedSchema.push({orientation:t||"vertical",fields:n.fields}),n.fields={}},this.getEntity=function(t){return n.schema.entities.find((function(e){return e.name===t}))},this.getFields=function(t,e,r,o){if(t.fields){var a=t.fields;r||n.fieldNameStack.push(t.name),a.forEach((function(e,r){var i,u,s=o?e.name:n.getName(Array.isArray(a)?e.name:r);if("entity"===e.type){if(!e.entityName)throw new Error("Please provide entityName for a field type of entity for field with name: "+e.name);on(n.fields)||n.pushAndEmptyFields(t.orientation),n.parseEntity(e.entityName,e.layoutName,!1)}else if("array"===e.type){if(on(n.fields)||n.pushAndEmptyFields(t.orientation),!e.entityName)throw new Error("Please provide entityName for a field type of entity for field with name: "+e.name);Object.assign(n.fields,((i={})[s]=c({},e,{arrayFields:n.getArrayFields(e.entityName,e.layoutName)}),i))}else Object.assign(o?n.arrayField:n.fields,((u={})[s]=c({},e),u)),o&&Object.assign(n.arrayField,{orientation:t.orientation})})),n.fieldNameStack.pop()}},this.getArrayFields=function(t,e){var r=n.getEntity(t);if(!r)throw new Error("Provided property entityName: "+t+", does not exist in the provided schema");e?n.getLayoutFields(r,e,!0):n.getFields(r,!0,!0,!0);var o=Object.assign({},n.arrayField);return n.arrayField={},o},this.getName=function(t){return n.fieldNameStack.length?n.fieldNameStack.reduce((function(t,e){return t+"."+e}))+"."+t:t},this.getLayoutFields=function(t,e,r){var o=t.layouts&&t.layouts.find((function(t){return t.name===e}));if(!o)throw new Error("Provided layoutName: "+e+", isn't provided in the schema");o.groups?o.groups.forEach((function(e){n.generateLayoutFields(e,t,r)})):n.generateLayoutFields(o,t,r)},this.generateLayoutFields=function(t,e,r){var o=[];t.fields.forEach((function(t){o.push(rn(t,e.fields.find((function(e){return e.name===t.name}))||{}))}));var a=Object.assign({},Gr(e,["layouts"]));Object.assign(a,{fields:o,orientation:t.orientation}),n.getFields(a,!0,!1,r)},this.schema=function(t){var e={};if(Object.assign(e,t),t.entities)return Array.isArray(t.entities)?(e.entities=[],t.entities.forEach((function(t){var r=an(t);e.entities.push(Object.assign({},c({},r)))})),e):(e.entities=[],Object.keys(t.entities).forEach((function(r){var n=an(t.entities[r]);e.entities.push(Object.assign({},c({},n,{name:r})))})),e);throw Error("Cannot find any entity passed in the provided schema")}(t),this.fieldNameStack=[],this.parsedSchema=[],this.subscribedFields=[],this.parseEntity(e,r,!0),this.fields={}},cn=E((function(t){
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){var e={}.hasOwnProperty;function r(){for(var t=[],n=0;n<arguments.length;n++){var o=arguments[n];if(o){var a=typeof o;if("string"===a||"number"===a)t.push(o);else if(Array.isArray(o)&&o.length){var i=r.apply(null,o);i&&t.push(i)}else if("object"===a)for(var u in o)e.call(o,u)&&o[u]&&t.push(u)}}return t.join(" ")}t.exports?(r.default=r,t.exports=r):window.classNames=r}()})),sn=function(e){var r=e.input,n=e.meta;return t.createElement("div",{className:cn({"d-none":!1===e.visible},{"d-flex":!0===e.visible||void 0===e.visible||"function"==typeof e.visible},"row-12 justify-content-between mb-3 w-auto h-10")},t.createElement("label",null,e.displayName),t.createElement("div",{className:"col-9"},t.createElement("input",{name:r.name,type:r.type,onChange:r.onChange,onBlur:r.onBlur,onFocus:r.onFocus,className:cn("rounded form-control",{"is-invalid":!n.valid},{disabled:e.disabled},{"d-none":!1===e.visible}),value:r.value}),n.error&&n.touched&&t.createElement("p",null,Array.isArray(n.error)?n.error[n.error.length-1]:n.error)))},fn=function(e){var r=e.input;e.meta;return t.createElement("div",{className:"d-flex row-12 justify-content-between mb-3 "},t.createElement(a.Label,null,e.displayName),t.createElement("select",{name:e.displayName,onChange:e.input.onChange,onFocus:r.onFocus,onBlur:r.onBlur,defaultValue:"",value:r.value,className:cn("rounded form-control col-9 bg-light",{disabled:e.disabled})},e.enum&&e.enum.map((function(e){return t.createElement("option",{value:e},e)})),e.options&&e.options.map((function(e){return t.createElement("option",{value:e.label||e.value},e.text)}))))},ln=function(t,e){if(Object.assign(e,{text:sn,select:fn}),t.component&&("function"==typeof t.component||"object"==typeof t.component))return t.component;if(t.component&&"string"==typeof t.component&&e&&e.hasOwnProperty(t.component))return e[t.component];if(t.component&&e&&!e.hasOwnProperty(t.component))throw new Error("Provided component "+t.component+" isn't provided in the component factory");return function(t){var e=t.field;switch(e.type){case"string":return e.options||e.enum?fn:sn;case"number":default:return sn}}({field:t})};var vn=function(t,e,r){var n=null==t?void 0:Or(t,e);return void 0===n?r:n},pn={},dn=function(t,e,r){if("function"!=typeof t)return t;try{return t(yn(r,e.values),e,e.values)}catch(e){return t}},yn=function(t,e){var r=t.split(".");return r.pop(),vn(e,r)||e},hn={evaluator:function(t,e){return t(e,e.value)},formState:pn,updateFormState:function(t){(pn=t).form.getFieldState("name")},metaDataEvaluator:function(t,e,r){var n=t;return Object.keys(t).forEach((function(o){var a;Object.assign(n,((a={})[o]=dn(t[o],e,r),a))})),n},getFieldState:function(t){var e=pn.form.getFieldState(t);return e&&"asd"===e.value?"WHEEEWWWW":"nope"},getLocalModel:yn,fieldPropertyCheck:function(t){for(var e in t)if("function"==typeof t[e])return!0;return!1}},bn=function(t){return t.match('/^(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/')?void 0:"Please enter a valid email"},mn=function(t){return t?void 0:"The field cannot be empty"},jn=function(t,e,r,n,o,a){if(t&&Object.keys(t).length){var i=void 0;t.required&&(i=gn("required",r));try{return i||(t.error?t.error(hn.getLocalModel(a,n),o,n):void 0)}catch(t){throw new Error(t)}}},gn=function(t,e){switch(t){case"required":return mn(e);case"email":return bn(e)}},_n=function(t,e,r){r.changeValue(e,t[0],(function(e){return function(e){var r=e.split("-"),n=new Date(parseInt(r[0]),parseInt(r[1])-1,parseInt(r[2]));if(!t[1])return n.toDateString();switch(t[1]){case"epoch":return n.getTime();case"UTC":return n.toUTCString();case"ISO":return n.toISOString();default:return n.getTime()}}(e)}))},wn=function(a){function s(){var u=null!==a&&a.apply(this,arguments)||this;return u.render=function(){var n=u.props,a=n.schema,i=n.entityName,s=n.layoutName,f=(n.bottomBar,n.formProps);console.log("schema",a,i);var l=new un(a,i,s);console.log("evaluated",l);var v=l.parsedSchema;return t.createElement("div",{className:"container-fluid form-builder"},t.createElement(e,c({},f,{mutators:c({},o,{date:_n}),render:function(e){return u.formProps=e,t.createElement("form",{onSubmit:e.handleSubmit},u.getFields(v),t.createElement(r,{name:"bottomBar",component:u.props.bottomBar,key:"bottomBar"}))}})))},u.getFields=function(e,r){if(Array.isArray(e))return e.map((function(e){return t.createElement("div",{className:cn("vertical"===e.orientation?"col":"row")},Object.keys(e.fields).map((function(t){return u.renderField(e.fields[t],t,r)})))}));if("object"==typeof e&&r){var n=e.orientation,o=Gr(e,["orientation"]);return t.createElement("div",{className:"vertical"===n?"verticalLayout":"horizontalLayout"},Object.keys(o).map((function(t){return u.renderField(o[t],t,r)})))}},u.renderField=function(e,o,a){var s=u.props.componentFactory,f=e.required||e.error?{error:e.error||e.validate,required:e.required||!1}:{};return hn.fieldPropertyCheck(e)?t.createElement(n,{render:function(n){var i=hn.metaDataEvaluator(Gr(e,["error"]),n,o);return t.createElement(r,c({name:a&&a.name?a.name+"."+o:o,component:ln(i,s),key:o,validate:function(t,e,r){return jn(f,0,t,e,r,o)},mutators:u.formProps.mutators},Gr(i,["validate","name","component"])))}}):"array"===e.type?t.createElement("div",{className:"m-20",key:o},t.createElement("label",null,t.createElement("b",null,e.displayName)),t.createElement(i,{name:o,render:function(t){return t.fields.map((function(t){return u.getFields(e.arrayFields,{name:t})}))}}),t.createElement("div",{className:"d-flex mb-10 row-12"},t.createElement("button",{type:"button",className:"btn btn-outline-primary w-20 mr-20",onClick:function(){return u.formProps.form.mutators.push(o,void 0)}},e.addText?e.addText:"Add +"),t.createElement("button",{type:"button",className:"btn btn-outline-danger mr-20 w-20",onClick:function(){return u.formProps.form.mutators.pop(o,void 0)}},e.addText?e.addText:"Delete -"))):t.createElement(r,c({name:a&&a.name?a.name+"."+o:o,component:ln(e,s),key:o,validate:function(t,e,r){return jn(f,0,t,e,r,o)},mutators:u.formProps.mutators},Gr(e,["validate","name","component"])))},u}return function(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(s,a),s}(t.PureComponent);export default wn;
